{% extends 'base.html' %}
{% load static %}

{% block content %}
<main class="dashboard-container">

    <header class="welcome-header fade-in-item" style="display:block; text-align:center;">
        <div class="eyebrow" style="margin-left:auto; margin-right:auto; font-weight:600; color:var(--primary-blue); background:rgba(0,102,255,0.08); padding:6px 14px; border-radius:12px; display:inline-flex; align-items:center; gap:6px;">
            <i class="fas fa-star"></i> Minhas Avaliações
        </div>
        <h1 class="page-title">Histórico de Avaliações</h1>
        <p class="page-subtitle">Todas as suas experiências em estádios registradas</p>
    </header>

    {% if page_obj %}
        <div class="avaliacoes-full-container">
            {% for avaliacao in page_obj %}
                <article class="avaliacao-full-card fade-in-item soft-card">
                    <header class="avaliacao-full-header">
                        <div class="estadio-full-info">
                            <div class="estadio-full-icon">
                                <i class="fas fa-stadium"></i>
                            </div>
                            <div class="estadio-full-content">
                                <h3 class="estadio-full-nome">
                                    <i class="fas fa-flag stadium-inline-icon" aria-hidden="true"></i>
                                    {{ avaliacao.estadio }}
                                </h3>

                                <div class="rating-full-display">
                                    <div class="stars-full-container" aria-hidden="true">
                                        {% for ch in "12345" %}
                                            {% if forloop.counter <= avaliacao.avaliacao_experiencia %}
                                                <i class="fas fa-star"></i>
                                            {% else %}
                                                <i class="far fa-star"></i>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                    <span class="rating-full-numero">{{ avaliacao.avaliacao_experiencia }}/5</span>
                                </div>
                            </div>
                        </div>
                    </header>

                    <div class="avaliacao-full-body">
                        <div class="comentario-full-wrapper">
                            <i class="fas fa-comment-dots comment-full-icon"></i>
                            <div class="comentario-full-content">
                                <p class="comentario-full">{{ avaliacao.comentario|default:"Sem comentário adicional" }}</p>
                            </div>
                        </div>
                    </div>

                    <footer class="avaliacao-full-footer">
                        <div class="data-full-info">
                            <i class="fas fa-calendar-alt"></i>
                            <span class="data-full-avaliacao">{{ avaliacao.data_avaliacao|date:"d/m/Y" }}</span>
                        </div>
                        <div class="time-full-info">
                            <i class="fas fa-clock"></i>
                            <span class="hora-full-avaliacao">{{ avaliacao.data_avaliacao|time:"H:i" }}</span>
                        </div>
                    </footer>
                </article>
            {% endfor %}
        </div>

        <div class="pagination-container fade-in-item">
            <div class="pagination">
                {% if page_obj.has_previous %}
                    <a href="?page={{ page_obj.previous_page_number }}" class="pagination-btn prev-btn">
                        <i class="fas fa-arrow-left"></i>
                        Anterior
                    </a>
                {% endif %}

                <div class="page-info">
                    <span class="current-page">{{ page_obj.number }}</span>
                    <span class="page-separator">de</span>
                    <span class="total-pages">{{ page_obj.paginator.num_pages }}</span>
                </div>

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}" class="pagination-btn next-btn">
                        Próxima
                        <i class="fas fa-arrow-right"></i>
                    </a>
                {% endif %}
            </div>
        </div>
    {% else %}
        <div class="empty-state fade-in-item">
            <div class="empty-icon"><i class="fas fa-clipboard-list"></i></div>
            <h3>Nenhuma avaliação encontrada</h3>
            <p>Você ainda não avaliou nenhum estádio. Comece agora e compartilhe sua experiência!</p>
            <a href="{% url 'core:nova_avaliacao' %}" class="btn-primary">
                <i class="fas fa-plus"></i>
                Fazer Primeira Avaliação
            </a>
        </div>
    {% endif %}
</main>

<style>
:root{
    --primary-blue:#0066FF;
    --secondary-blue:#0052D4;
    --muted:#f8fbff;
    --gray-light:#F8FAFC;
    --gray-medium:#64748B;
    --gray-dark:#334155;
    --card-radius:14px;
    --soft-shadow:0 8px 24px rgba(0,102,255,0.06);
    --gentle-shadow:0 12px 34px rgba(0,102,255,0.08);
    --trans: 260ms cubic-bezier(.2,.9,.3,1);
}

.dashboard-container{max-width:1100px;margin:0 auto;padding:18px;display:flex;flex-direction:column;gap:24px}
.welcome-header{text-align:center;margin-bottom:10px}
.welcome-header .eyebrow{font-size:0.9rem; letter-spacing:0.3px; box-shadow:var(--soft-shadow)}

.avaliacoes-full-container{display:flex;flex-direction:column;gap:18px}
.avaliacao-full-card{background:linear-gradient(180deg,#ffffff,#fbfeff);border-radius:var(--card-radius);padding:20px;border:1px solid rgba(0,102,255,0.06);box-shadow:var(--soft-shadow);transition:transform var(--trans),box-shadow var(--trans);overflow:hidden}
.avaliacao-full-card:hover{transform:translateY(-6px);box-shadow:var(--gentle-shadow);border-color:rgba(0,102,255,0.08)}

.estadio-full-info{display:flex;align-items:center;gap:16px}
.estadio-full-icon{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(0,102,255,0.04),rgba(0,82,212,0.02));color:var(--primary-blue);border:1px solid rgba(0,102,255,0.06);font-size:1.4rem}
.estadio-full-nome{font-weight:700;color:var(--gray-dark);margin:0;font-size:1.15rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.stadium-inline-icon{margin-right:8px;color:var(--primary-blue);font-size:0.95em}

.rating-full-display{display:inline-flex;align-items:center;gap:10px;padding:6px 12px;border-radius:10px;background:rgba(255,243,205,0.6);border:1px solid rgba(255,193,7,0.12)}
.stars-full-container i{color:#FFC107;margin-right:4px}
.rating-full-numero{font-weight:700;color:var(--gray-dark)}

.comentario-full-wrapper{display:flex;gap:14px;align-items:flex-start}
.comment-full-icon{color:var(--primary-blue);font-size:1.2rem;margin-top:4px}
.comentario-full{color:var(--gray-medium);margin:0;line-height:1.6}

.avaliacao-full-footer{display:flex;justify-content:space-between;gap:12px;padding-top:12px;border-top:1px solid rgba(0,102,255,0.06);font-size:0.92rem;color:var(--gray-medium)}

.pagination{display:flex;gap:12px;align-items:center;justify-content:center;margin-top:12px}
.pagination-btn{padding:10px 18px;border-radius:10px;border:1px solid rgba(0,102,255,0.06);background:var(--gray-light);color:var(--gray-dark);text-decoration:none;font-weight:600;transition:transform var(--trans),box-shadow var(--trans)}
.pagination-btn:hover{transform:translateY(-3px);box-shadow:var(--soft-shadow)}
.next-btn{background:linear-gradient(90deg,var(--primary-blue),var(--secondary-blue));color:white;border:none}
.next-btn:hover{transform:translateY(-3px);box-shadow:var(--gentle-shadow)}

.empty-state{max-width:520px;margin:0 auto;padding:36px;border-radius:16px;background:linear-gradient(180deg,#ffffff,#fbfeff);box-shadow:var(--soft-shadow);border:1px solid rgba(0,102,255,0.06);text-align:center}
.btn-primary{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:10px;background:linear-gradient(90deg,var(--primary-blue),var(--secondary-blue));color:white;text-decoration:none;font-weight:700}

@media(max-width:900px){.avaliacao-full-card{padding:16px}.estadio-full-icon{width:48px;height:48px}.estadio-full-nome{font-size:1.05rem}}
@media(max-width:600px){.avaliacao-full-footer{flex-direction:column;align-items:flex-start}.comentario-full-wrapper{flex-direction:column;gap:10px}}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.avaliacao-full-card').forEach((card, idx) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(10px)';
        setTimeout(() => { card.style.transition = 'opacity 420ms ease, transform 420ms ease'; card.style.opacity = '1'; card.style.transform = 'translateY(0)'; }, idx * 90 + 120);

        card.addEventListener('mouseenter', () => {
            card.style.transform = 'translateY(-6px)';
            card.style.boxShadow = '0 18px 40px rgba(0,102,255,0.08)';
        });

        card.addEventListener('mouseleave', () => {
            card.style.transform = 'translateY(0)';
            card.style.boxShadow = '';
        });
    });
});
</script>

{% endblock %}