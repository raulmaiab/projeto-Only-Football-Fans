{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
    :root{
        --primary-blue: #0066FF;
        --secondary-blue: #0052D4;
        --blue-light: #E8F3FF;
        --bg-soft: #fbfdff;
        --card-radius: 16px;
        --shadow-soft: 0 8px 24px rgba(0,102,255,0.06);
        --shadow-gentle: 0 12px 34px rgba(0,102,255,0.08);
        --text-dark: #1A3A5F;
        --muted: #64748B;
        --trans: 260ms cubic-bezier(.2,.9,.3,1);
    }

    .profile-edit-container{
        display:flex;
        justify-content:center;
        padding:28px 20px 60px;
        font-family:'Poppins',sans-serif;
        background: linear-gradient(180deg, #f7fbff 0%, #f2f7ff 100%);
        min-height: calc(100vh - 80px);
    }

    .profile-card{
        width:100%;
        max-width:720px;
        background: linear-gradient(180deg,#ffffff,#fbfeff);
        border-radius:var(--card-radius);
        box-shadow:var(--shadow-soft);
        overflow:hidden;
        border:1px solid rgba(0,102,255,0.06);
        transition: transform var(--trans), box-shadow var(--trans);
    }

    .profile-card:hover{ transform: translateY(-6px); box-shadow: var(--shadow-gentle); }

    .profile-avatar-wrapper{
        display:flex;
        justify-content:center;
        margin-top: 36px;
        margin-bottom: 20px;
    }

    .profile-avatar{
        width:112px;
        height:112px;
        border-radius:50%;
        background:#fff;
        border:6px solid #f3f6fb;
        display:flex;
        align-items:center;
        justify-content:center;
        box-shadow: 0 8px 30px rgba(0,102,255,0.06);
        font-size:48px;
        color:var(--primary-blue);
    }

    .card-body{
        padding: 0 36px 36px;
        text-align:left;
    }

    .card-title{
        margin: 0 0 24px 0;
        font-size:1.4rem;
        color:var(--text-dark);
        font-weight:800;
        text-align:center;
    }

    .form-grid{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; margin-top:14px; }
    .form-group{ display:flex; flex-direction:column; }
    .form-group label{ font-weight:600; color:var(--text-dark); margin-bottom:6px; font-size:0.95rem; }
    .form-group input{ padding:10px 12px; border-radius:10px; border:1px solid rgba(17,24,39,0.06); font-size:1rem; }
    .form-group input:focus{ outline:none; box-shadow:0 6px 18px rgba(0,102,255,0.06); border-color:var(--primary-blue); }
    .form-full{ grid-column: 1 / -1; }

    .small-text-hint{ font-size:0.85rem; color:var(--muted); margin-top:6px; }

    .save-button{ width:100%; padding:12px; border-radius:10px; background: linear-gradient(90deg,var(--primary-blue),var(--secondary-blue)); color:white; border:none; font-weight:700; margin-top:18px; cursor:pointer; box-shadow:0 8px 20px rgba(0,102,255,0.08); }
    .save-button:hover{ transform:translateY(-2px); }

    .secondary-action-link{
        display:flex;
        justify-content:center;
        align-items:center;
        gap:8px;
        margin:18px auto 0;
        width:fit-content;
        color:#d13b3b;
        font-weight:700;
        text-decoration:none;
        padding:10px 14px;
        border-radius:8px;
        transition:var(--trans);
    }

    .secondary-action-link:hover{
        color:white;
        background: #b80909ff;
        transform:translateY(-2px);
        box-shadow:0 4px 12px rgba(255,107,107,0.32);
    }

    @media (max-width:720px){ .form-grid{ grid-template-columns:1fr; } .profile-card{ max-width:520px; } }
    @media (max-width:420px){ .profile-card{ margin:0 12px; } .card-body{ padding:18px; } }
    </style>
{% endblock %}

{% block content %}
<main class="profile-edit-container">
    <section class="profile-card fade-in-item">
        <div class="profile-avatar-wrapper">
            <div class="profile-avatar" aria-hidden="true">
                <i class="fa-solid fa-user"></i>
            </div>
        </div>

        <div class="card-body">
            <h2 class="card-title">Configurações de Perfil</h2>

            <form method="POST">
                {% csrf_token %}
                <div class="form-grid">
                    <div class="form-group form-full">
                        <label for="id_nome">Nome</label>
                        <input 
                            type="text" 
                            id="id_nome" 
                            name="nome" 
                            value="{{ form.nome.value|default:'' }}" 
                            placeholder="Seu nome completo" 
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label for="id_email">E-mail</label>
                        <input 
                            type="email" 
                            id="id_email" 
                            name="email" 
                            value="{{ form.email.value|default:'' }}" 
                            disabled
                        >
                        <p class="small-text-hint">O email não pode ser editado diretamente por segurança.</p>
                    </div>

                    <div class="form-group">
                        <label for="id_time">Time Favorito</label>
                        <input 
                            type="text" 
                            id="id_time" 
                            name="time_favorito" 
                            value="{{ form.time_favorito.value|default:'' }}" 
                            placeholder="Ex: Náutico, Sport, Santa Cruz"
                        >
                    </div>

                </div>

                <button type="submit" class="save-button">Salvar Alterações</button>
                <a href="{% url 'core:logout' %}" class="secondary-action-link">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    Sair da Conta
                </a>
            </form>
        </div>
    </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.fade-in-item').forEach((el, i) => {
        el.style.opacity = '0'; el.style.transform = 'translateY(8px)';
        setTimeout(() => { el.style.transition = 'opacity 360ms ease, transform 360ms ease'; el.style.opacity = '1'; el.style.transform = 'translateY(0)'; }, i * 80 + 120);
    });
});
</script>

{% endblock %}