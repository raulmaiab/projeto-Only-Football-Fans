{% extends 'base.html' %}

{% block content %}
<main class="dashboard-container">
    
    <!-- Header com efeito glass -->
    <header class="welcome-header fade-in-item">
        <div class="eyebrow">
            <i class="fas fa-hand-wave"></i>Bem-vindo de volta
        </div>
        <h1 class="page-title">Olá, {{ request.user.username }}!</h1>
        <p class="page-subtitle">Seu painel de torcedor está pronto. O que vamos fazer hoje?</p>
    </header>

    <!-- Cards de ações rápidas -->
    <section class="quick-actions-grid">
        
        <a href="{% url 'core:registrar_partida' %}" class="action-card floating fade-in-item">
            <div class="card-icon-wrapper">
                <div class="card-icon">
                    <i class="fa-solid fa-plus"></i>
                </div>
            </div>
            <div class="card-content">
                <h3>Registrar Nova Partida</h3>
                <p>Anote os detalhes do jogo que você assistiu</p>
            </div>
            <div class="card-arrow">
                <i class="fas fa-arrow-right"></i>
            </div>
        </a>
        
        <a href="{% url 'core:lista_partidas' %}" class="action-card floating fade-in-item">
            <div class="card-icon-wrapper">
                <div class="card-icon">
                    <i class="fa-solid fa-chart-simple"></i>
                </div>
            </div>
            <div class="card-content">
                <h3>Histórico de Jogos</h3>
                <p>Veja e avalie suas partidas anteriores</p>
            </div>
            <div class="card-arrow">
                <i class="fas fa-arrow-right"></i>
            </div>
        </a>

        <a href="{% url 'core:avaliacao_inicio' %}" class="action-card floating fade-in-item">
            <div class="card-icon-wrapper">
                <div class="card-icon">
                    <i class="fa-solid fa-star"></i>
                </div>
            </div>
            <div class="card-content">
                <h3>Avaliar Estádio</h3>
                <p>Conte como foi sua experiência na arquibancada</p>
            </div>
            <div class="card-arrow">
                <i class="fas fa-arrow-right"></i>
            </div>
        </a>

        <a href="{% url 'core:galeria' %}" class="action-card floating fade-in-item">
            <div class="card-icon-wrapper">
                <div class="card-icon">
                    <i class="fa-solid fa-camera-retro"></i>
                </div>
            </div>
            <div class="card-content">
                <h3>Galeria de Mídia</h3>
                <p>Reveja suas fotos e vídeos dos jogos</p>
            </div>
            <div class="card-arrow">
                <i class="fas fa-arrow-right"></i>
            </div>
        </a>
    </section>

    <!-- Painel de estatísticas -->
    <section class="stats-panel fade-in-item">
        <div class="stats-header">
            <h2 class="section-title">Suas Estatísticas</h2>
            <p class="section-subtitle">Acompanhe suas atividades como torcedor</p>
        </div>
        
        <div class="stats-grid">
            
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-futbol"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-number" data-value="{{ partidas_registradas }}">0</div>
                    <div class="stat-label">Partidas Registradas</div>
                </div>
            </div>
            
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fa-solid fa-landmark-flag"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-number" data-value="{{ estadios_avaliados }}">0</div>
                    <div class="stat-label">Estádios Avaliados</div>
                </div>
            </div>

            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <div class="stat-info">
                    {% if time_favorito %}
                        <div class="stat-number stat-team">{{ time_favorito }}</div>
                    {% else %}
                        <div class="stat-number">--</div>
                    {% endif %}
                    <div class="stat-label">Time do Coração</div>
                </div>
            </div>

        </div>
    </section>

</main>

<style>
:root{
    --primary-blue: #0066FF;
    --secondary-blue: #0052D4;
    --blue-light: #EBF5FF;
    --muted: #f7fbff;
    --gray-medium: #64748B;
    --gray-dark: #334155;

    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;

    --shadow-soft: 0 8px 24px rgba(0,102,255,0.06);
    --shadow-medium: 0 14px 34px rgba(0,102,255,0.08);

    --trans-fast: 180ms cubic-bezier(.2,.9,.3,1);
    --trans-medium: 320ms cubic-bezier(.2,.9,.3,1);
}

/* suavizar animações */
@keyframes gentleFloat { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-4px);} }
@keyframes slowFadeIn { from{ opacity:0; transform: translateY(12px);} to{ opacity:1; transform: translateY(0);} }

.floating{ animation: gentleFloat 8s ease-in-out infinite; }
.fade-in-item{ opacity:0; animation: slowFadeIn 520ms var(--trans-medium) forwards; }

.dashboard-container{ display:flex; flex-direction:column; gap:28px; max-width:1200px; margin:0 auto; padding:18px; }
.welcome-header{ text-align:center; padding:22px; background: rgba(255,255,255,0.96); backdrop-filter: blur(10px); border-radius:var(--radius-xl); box-shadow:var(--shadow-soft); border:1px solid rgba(0,102,255,0.06); position:relative; overflow:hidden; }
.welcome-header::before{ content:''; position:absolute; top:0; left:0; right:0; height:3px; background: linear-gradient(90deg,var(--primary-blue),var(--secondary-blue)); }
.eyebrow{ display:inline-flex; align-items:center; gap:8px; padding:6px 12px; border-radius:var(--radius-md); background:var(--blue-light); color:var(--primary-blue); font-weight:600; font-size:13px; margin-bottom:12px; border:1px solid rgba(0,102,255,0.08); }
.page-title{ font-size:clamp(1.6rem,2.6vw,2rem); font-weight:800; margin:6px 0; color: #1A3A5F; background:linear-gradient(90deg,#1A3A5F,var(--secondary-blue)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.page-subtitle{ color:var(--gray-medium); margin:0; font-size:1rem; }

/* quick actions */
.quick-actions-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); gap:20px; }
.action-card{ position:relative; display:flex; flex-direction:column; text-decoration:none; background:rgba(255,255,255,0.98); padding:22px; border-radius:var(--radius-lg); box-shadow:var(--shadow-soft); border:1px solid rgba(0,102,255,0.05); transition: transform var(--trans-medium), box-shadow var(--trans-medium), border-color var(--trans-medium); height:200px; }
.action-card::before{ content:''; position:absolute; top:0; left:0; right:0; height:3px; background: linear-gradient(90deg, rgba(0,102,255,0.14), rgba(0,82,212,0.12)); transition: height var(--trans-medium); }
.action-card:hover{ transform: translateY(-8px); box-shadow:var(--shadow-medium); border-color: rgba(0,102,255,0.08); }
.action-card:hover::before{ height:5px; }
.card-icon{ width:56px; height:56px; border-radius:var(--radius-md); display:flex; align-items:center; justify-content:center; background:var(--blue-light); color:var(--primary-blue); font-size:1.5rem; border:1px solid rgba(0,102,255,0.08); transition: transform var(--trans-medium); }
.action-card:hover .card-icon{ transform: scale(1.05); }
.card-content h3{ margin:0 0 6px 0; color: #1A3A5F; font-size:1.15rem; font-weight:700; transition: color var(--trans-medium); }
.action-card:hover .card-content h3{ color:var(--primary-blue); }
.card-content p{ margin:0; color:var(--gray-medium); }
.card-arrow{ position:absolute; bottom:18px; right:18px; width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:var(--blue-light); color:var(--primary-blue); border:1px solid rgba(0,102,255,0.08); opacity:0; transform: translateX(8px); transition: opacity var(--trans-fast), transform var(--trans-fast), background var(--trans-fast); }
.action-card:hover .card-arrow{ opacity:1; transform: translateX(0); background: linear-gradient(90deg,var(--primary-blue),var(--secondary-blue)); color:white; border-color:transparent; }

/* stats */
.stats-panel{ background: rgba(255,255,255,0.98); padding:22px; border-radius:var(--radius-xl); box-shadow:var(--shadow-soft); border:1px solid rgba(0,102,255,0.05); }
.stats-header{ text-align:center; margin-bottom:18px }
.section-title{ margin:0; font-size:1.4rem; color:#1A3A5F; }
.section-subtitle{ margin:0; color:var(--gray-medium); }
.stats-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); gap:14px; }
.stat-item{ display:flex; align-items:center; gap:14px; padding:14px; border-radius:var(--radius-lg); background:rgba(255,255,255,0.98); border:1px solid rgba(0,102,255,0.04); transition: transform var(--trans-medium), box-shadow var(--trans-medium); }
.stat-item:hover{ transform: translateY(-6px); box-shadow: var(--shadow-medium); }
.stat-icon{ width:54px; height:54px; border-radius:var(--radius-md); background:var(--blue-light); display:flex; align-items:center; justify-content:center; color:var(--primary-blue); border:1px solid rgba(0,102,255,0.08); }
.stat-number{ font-size:1.6rem; color:var(--primary-blue); font-weight:700; }
.stat-team{ font-size:1.15rem; color:#1A3A5F; font-weight:600; }
.stat-label{ color:var(--gray-medium); }

/* responsividade suave */
@media (max-width: 1024px){ .quick-actions-grid{ gap:18px } .action-card{ height:190px; padding:18px } }
@media (max-width: 768px){ .dashboard-container{ padding:12px; gap:20px } .quick-actions-grid{ grid-template-columns:repeat(2,1fr) } .action-card{ height:170px } }
@media (max-width: 480px){ .quick-actions-grid{ grid-template-columns:1fr } .action-card{ height:150px; padding:14px } .card-arrow{ bottom:14px; right:14px } }
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // counters animation (kept but softened)
    const counters = document.querySelectorAll('.stat-number[data-value]');
    const duration = 1200;
    const animate = (el, to) => {
        let start = null;
        const step = (ts) => {
            if (!start) start = ts;
            const p = Math.min((ts - start) / duration, 1);
            const v = Math.floor((1 - Math.pow(1 - p, 3)) * to);
            el.textContent = v;
            if (p < 1) requestAnimationFrame(step);
            else el.textContent = to;
        };
        requestAnimationFrame(step);
    };
    const io = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const el = entry.target;
                const val = parseInt(el.dataset.value, 10) || 0;
                if (val > 0) animate(el, val);
                io.unobserve(el);
            }
        });
    }, { threshold: 0.5 });
    counters.forEach(c => io.observe(c));

    // pause float on hover
    document.querySelectorAll('.floating').forEach(card => {
        card.addEventListener('mouseenter', () => card.style.animationPlayState = 'paused');
        card.addEventListener('mouseleave', () => card.style.animationPlayState = 'running');
    });
});
</script>

{% endblock %}